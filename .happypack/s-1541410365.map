{"version":3,"sources":["src/components/touch-nav-item.js"],"names":["React","require","_","omit","mixins","css_mixins","text_mixins","checker","cssMixins","textMixins","NavActions","NavStore","TouchNavItem","props","listCss","nav_item","active","state","list","getClasses","nextProps","nextState","setState","e","preventDefault","item","cb","callback","data","isMounted","changeActive","id","nav_id","isFunction","apply","values","navitem","title","_clicked","bind","name","href","has","_external","_internal","_renderLink","Component","Object","assign","prototype","module","exports"],"mappings":"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","file":"touch-nav-item.js","sourceRoot":"/Users/adrianstainforth/sites/modules/touch-nav","sourcesContent":["const React = require(\"react\")\n    , _     = require(\"lodash/core\");\n\n_.omit = require(\"lodash/omit\");\n//Mixins\nlet mixins = require(\"morse-react-mixins\");\nconst [cssMixins, textMixins, checker]  = [mixins.css_mixins, mixins.text_mixins, mixins.checker];\n\n\n//Flux\nconst NavActions = require(\"../actions/nav_actions\")\n    , NavStore   = require(\"../stores/nav_store\");\n\n\nclass TouchNavItem extends React.Component {\n   constructor(props) {\n    super(props);\n    // console.log('props', this.props.nav_item);\n    this.listCss = [\"date-nav-item\", {\"active\":this.props.nav_item.active}]\n    this.state = {list:this.getClasses(this.listCss)};\n  }\n\n  shouldComponentUpdate(nextProps, nextState){\n    return (nextProps.nav_item.active !== this.props.nav_item.active) || nextState.list !== this.state.list\n  }\n\n  componentWillReceiveProps(nextProps){\n    this.listCss = [\"date-nav-item\", {\"active\":nextProps.nav_item.active}];\n    this.setState({list:this.getClasses(this.listCss)});\n  }\n\n  _clicked(e){\n    e.preventDefault();\n\n    let item = this.props.nav_item;\n    let cb = this.props.callback;\n    let data = _.omit(item, 'title');\n    if(checker.isMounted(this)){\n      NavActions.changeActive(this.props.nav_item.id, this.props.nav_id)\n      if(_.isFunction(cb)){\n        cb.apply(this, _.values(data));\n      }\n    }\n\n  }\n\n  _internal(navitem){\n    return(\n      <a href=\"#\"\n         title={navitem.title}\n         onClick={this._clicked.bind(this)}\n         className=\"date-nav-item-link\">\n          {navitem.name}\n      </a>\n    )\n\n  }\n\n   _external(navitem){\n    return (\n      <a href={navitem.href}\n         title={navitem.title}\n         className=\"date-nav-item-link\">\n         {navitem.name}\n      </a>\n    )\n  }\n\n  _renderLink(navitem){\n    return (_.has(navitem, \"href\")) ? this._external(navitem) : this._internal(navitem);\n  }\n\n\n  render(){\n    let navitem = this.props.nav_item\n    return (\n      <li role=\"presentation\" className={this.state.list}>\n        {this._renderLink(navitem)}\n      </li>\n    );\n  }\n}\n\nObject.assign(TouchNavItem.prototype, cssMixins);\nObject.assign(TouchNavItem.prototype, textMixins);\n// Object.assign(TouchNavItem.prototype, checker);\n\n\nmodule.exports = TouchNavItem;"]}